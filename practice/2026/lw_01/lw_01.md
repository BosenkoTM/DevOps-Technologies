# Лабораторная работа №1. Работа с Git и GitHub/GitVerse: инициализация, ветвление, управление версиями в аналитическом проекте

## Цель работы
Научиться применять систему контроля версий Git для управления жизненным циклом аналитического проекта: от настройки окружения и инициализации репозитория до работы с ветками (branching), слияния (merging) и разрешения конфликтов при совместной разработке скриптов обработки данных.

## Исходные данные и инструменты
В рамках курса выполняется **сквозной проект**: разработка «Корпоративной платформы аналитики данных» (Corporate Data Analytics Platform — CDAP).
Каждая лабораторная работа развивает этот проект. В ЛР №1 мы закладываем фундамент: структуру проекта, документацию и версионность.

### Используемые источники данных (Real-World Data)
Для выполнения заданий необходимо выбрать набор данных, соответствующий вашему варианту. Данные должны быть реально существующими (доступными для скачивания или обращения по API).

| Категория данных | Описание источника | Примеры реальных наборов (Datasets) |
|:--- |:--- |:--- |
| **Финансы (Finance)** | Котировки акций, криптовалют, финансовая отчетность. Источники: *Yahoo Finance, Kaggle Finance, MOEX API*. | `S&P 500 Stock Data`, `Bitcoin Historical Data`, `Bank Churn Modeling`. |
| **Ритейл (Retail)** | Транзакции, поведение клиентов, продажи. Источники: *UCI Machine Learning Repository, Kaggle Retail*. | `Online Retail II UCI`, `Brazilian E-Commerce Public Dataset`, `Walmart Store Sales`. |
| **Здравоохранение (Healthcare)** | Статистика заболеваний, медицинские показатели. Источники: *WHO (ВОЗ), CDC, Kaggle Health*. | `Heart Disease UCI`, `COVID-19 World Vaccination Progress`, `Diabetes Dataset`. |
| **Логистика и Энергетика (Logistics & Energy)** | Потребление энергии, цепочки поставок, транспорт. Источники: *World Bank Open Data, US Energy Info Admin*. | `Global Energy Consumption`, `Uber Pickups in NYC`, `Traffic Prediction Dataset`. |

## Требования к окружению (Technical Stack)
На основе Практической работы 2-1 (Основы Linux):
-  **ОС:** Ubuntu 22.04/24.04 (в VirtualBox или WSL2 для Windows).
-  **Инструменты:** Git (v 2.30+), SSH-клиент, текстовый редактор (Nano/Vim или VS Code).
-  **Хостинг репозиториев:** GitHub или GitVerse (отечественный аналог).

## Ход работы

### Этап 1. Подготовка окружения (Linux & SSH)
*Базируется на Практической работе 2-1.*
-  Создать пользователя в системе (формат: `student_var<№варианта>`) и наделить его правами `sudo`.
-  Установить `git` и `python3-pip`.
-  Сгенерировать SSH-ключ (`ed25519` или `rsa`) и добавить публичный ключ в настройки профиля GitHub/GitVerse.
-  Настроить глобальную конфигурацию Git (`user.name`, `user.email`).

### Этап 2. Инициализация аналитического проекта
*Базируется на Практической работе 2.2.*
-  Создать локальную директорию проекта в соответствии с принятой в Data Science структурой (например, Cookiecutter Data Science):
    *   `/data` — для сырых данных.
    *   `/notebooks` — для Jupyter ноутбуков.
    *   `/src` — для исходного кода (ETL-скрипты).
-  Инициализировать Git-репозиторий.
-  Создать файл `.gitignore`, исключив системные файлы (`.DS_Store`), временные файлы Python (`__pycache__`, `*.pyc`), виртуальные окружения (`.venv`, `env/`) и **сами файлы данных** (`*.csv`, `*.xlsx`, `*.json`), так как большие данные не хранятся в Git.

### Этап 3. Симуляция командной работы (Ветвление и Конфликты)
-  **Ветка `dev`**: Создать ветку разработки от `main`.
-  **Ветка `feature/data-loader`**: Создать ветку для написания скрипта загрузки данных.
    *   Создать файл `src/loader.py`.
    *   Добавить код (заглушку), имитирующий загрузку данных из вашего источника (см. таблицу данных).
    *   Сделать коммит.
-  **Имитация конфликта**:
    *   Переключиться в `dev`.
    *   Внести изменения в ту же строку файла `src/loader.py` (например, изменить URL источника данных). Сделать коммит.
    *   Сделать слияние (merge) ветки `feature/data-loader` в `dev`.
    *   **Разрешить возникший конфликт** (выбрать один из вариантов или объединить их).
-  **Pull Request (Merge Request)**:
    *   Отправить (push) ветки в удаленный репозиторий.
    *   Оформить слияние `dev` в `main` через интерфейс GitHub/GitVerse.

---

## Варианты заданий (Кейсы)

В таблице ниже представлены задания. Номер варианта соответствует вашему номеру в списке группы.

**Бизнес-задача** описывает проблему, которую решает аналитика. 

**Проектная задача** — конкретный шаг в разработке. 

**Техническое задание** — специфика использования Git для данного варианта.

| Вариант | Категория данных | Бизнес-задача (Business Problem) | Проектная задача (Project Scope) | Техническое задание (Git Nuance) |
|:---:|:---:|:---|:---|:---|
| **1** | Финансы | Прогнозирование оттока клиентов банка. | Создать структуру проекта для модели Churn Prediction. | Реализовать стратегию ветвления **Git Flow**. Сделать ветки `feature/exploratory` и `release/v1.0`. |
| **2** | Финансы | Анализ волатильности криптовалют. | Скрипт сбора исторических данных Bitcoin (API Connector). | Использовать **Git Tag** для маркировки версии скрипта v0.1-alpha. |
| **3** | Финансы | Оценка кредитных рисков (Scoring). | Подготовка файла зависимостей `requirements.txt` для ML-библиотек. | Использовать `git stash` при переключении между задачами настройки библиотек. |
| **4** | Финансы | Портфельная оптимизация акций. | Документация `README.md` с описанием методологии Марковица. | Разрешить конфликт в `README.md`, возникший из-за правок в заголовках. |
| **5** | Финансы | Анализ мошеннических транзакций (Fraud). | Скрипт предобработки данных `preprocessing.py` (удаление дублей). | Отменить последний коммит через `git reset --soft` и переделать его. |
| **6** | Финансы | Прогнозирование выручки филиалов. | Создание конфига `config.yaml` с параметрами доступа к БД. | Добавить `config.yaml` в `.gitignore` уже *после* случайного коммита, исправить ошибку (удалить из индекса). |
| **7** | Финансы | Анализ эффективности маркетинговых трат (ROI). | Скрипт агрегации данных из CRM и рекламных кабинетов. | Использовать `git commit --amend` для изменения описания последнего коммита. |
| **8** | Финансы | Аудит операционных расходов. | Создание шаблона отчета в `notebooks/audit_template.ipynb`. | Создать ветку `hotfix/typo` от `main`, исправить ошибку, слить обратно. |
| **9** | Финансы | Анализ ликвидности активов. | Python-скрипт расчета коэффициентов ликвидности. | Продемонстрировать `git cherry-pick` для переноса коммита из `dev` в `main`. |
| **10** | Финансы | Предсказание дефолта заемщиков. | Файл описания датасета `data/data_dictionary.md`. | Использовать `git diff` для сравнения версий описания полей данных. |
| **11** | Ритейл | Сегментация покупателей (RFM-анализ). | Скрипт расчета метрик Recency, Frequency, Monetary. | Разрешить конфликт, где один разработчик менял функцию расчета, а другой — импорты. |
| **12** | Ритейл | Анализ товарной корзины (Market Basket). | Подготовка скрипта ассоциативных правил (Apriori). | Использовать `git blame`, чтобы найти автора строки кода (симуляция). |
| **13** | Ритейл | Прогнозирование спроса на сезонные товары. | Создание `setup.py` для упаковки проекта как пакета. | Реализовать стратегию **GitHub Flow** (feature branch -> pull request). |
| **14** | Ритейл | Анализ отзывов клиентов (NLP / Sentiment). | Загрузка словарей стоп-слов в папку `references/`. | Настроить `.gitattributes` для корректной обработки текстовых файлов (eol). |
| **15** | Ритейл | Оптимизация складских запасов. | Скрипт интеграции с API складской программы. | Работа с `git remote`: добавить второй удаленный репозиторий (резервный). |
| **16** | Ритейл | A/B тестирование дизайна сайта. | Ноутбук с расчетом p-value и доверительных интервалов. | Использовать `git checkout -b` для создания ветки эксперимента. |
| **17** | Ритейл | Анализ возвратов товаров. | SQL-запросы для выгрузки данных, сохраненные в `.sql` файлах. | Слить ветку с флагом `--no-ff` (no fast-forward) для сохранения истории. |
| **18** | Ритейл | Персонализация рекомендаций. | Скрипт коллаборативной фильтрации `recsys.py`. | Удалить ветку после успешного слияния (`git branch -d`). |
| **19** | Ритейл | Анализ воронки продаж. | Визуализация этапов воронки (код для Plotly/Matplotlib). | Восстановить случайно удаленный файл через `git checkout`. |
| **20** | Ритейл | Гео-аналитика открытий новых точек. | Файл с координатами конкурентов (GeoJSON). | Настроить `.gitignore` для игнорирования файлов карт большого объема. |
| **21** | Здравоохр. | Мониторинг распространения эпидемий. | Загрузчик данных с сайта WHO/JHU (COVID stats). | Разрешить конфликт в файле зависимостей (разные версии pandas). |
| **22** | Здравоохр. | Анализ эффективности лекарств. | Скрипт проверки статистических гипотез. | Использовать `git log --graph` для визуализации дерева коммитов в отчете. |
| **23** | Здравоохр. | Прогнозирование загрузки койко-мест. | Модель временного ряда (ARIMA) в отдельном файле. | Переименовать ветку `master` в `main` (если создалась старая) локально и удаленно. |
| **24** | Здравоохр. | Анализ медицинских изображений (MRI). | Структура папок для train/test/val выборок (пустых). | Использовать `git keep` (пустой файл) для сохранения структуры пустых папок. |
| **25** | Здравоохр. | Выявление групп риска (Диабет). | Описание признаков пациента в `README.md`. | Откатить изменения в файле до состояния 3 коммита назад. |
| **26** | Здравоохр. | Анализ стоимости медицинских услуг. | Скрипт парсинга прайс-листов клиник. | Сделать `squash` коммитов перед слиянием (объединить мелкие правки). |
| **27** | Здравоохр. | Управление запасами медикаментов. | Логирование операций скрипта (`logging.conf`). | Создать алиас (alias) для длинной команды git (например, `git graph`). |
| **28** | Здравоохр. | Анализ длительности приемов врачей. | Скрипт очистки данных от выбросов (outliers). | Работа с веткой `fix/outliers-logic`, разрешение конфликта логики. |
| **29** | Здравоохр. | Электронная медкарта: анализ текстов. | Скрипт деперсонализации данных (удаление ФИО). | Убедиться, что файл с примерами ФИО не попал в коммит (использование `git status`). |
| **30** | Здравоохр. | Оценка удовлетворенности пациентов. | Дашборд на Streamlit (код приложения). | Создать релиз `v1.0.0` на GitHub через интерфейс и связать с тегом Git. |
| **31** | Логистика | Оптимизация маршрутов доставки. | Интеграция с картами (OSM) в скрипте `routing.py`. | Принудительно перезаписать локальные изменения данными из удаленного репо (`git fetch --all`, `git reset --hard`). |
| **32** | Логистика | Предиктивный ремонт транспорта. | Анализ данных с IoT датчиков (структура логов). | Использовать `git rebase` для актуализации ветки `feature` относительно `main`. |
| **33** | Логистика | Управление цепочками поставок (SCM). | Модель прогноза дефицита на складе. | Разрешить сложный конфликт: один удалил файл, другой его отредактировал. |
| **34** | Энергетика | Прогноз потребления электроэнергии. | Загрузка погодных данных (Weather API). | Настроить SSH-доступ и склонировать свой репо в другую папку (симуляция 2-го ПК). |
| **35** | Энергетика | Анализ эффективности солнечных панелей. | Расчет ROI установки панелей по регионам. | Использовать `git stash pop` для возврата отложенных изменений. |
| **36** | Энергетика | Мониторинг выбросов CO2. | Скрипт генерации отчетов для регулятора. | Изменить сообщение старого коммита (interactive rebase `git rebase -i`). |
| **37** | Логистика | Анализ загруженности портов. | Парсер данных о движении судов (MarineTraffic). | Добавить лицензию проекта `LICENSE` (MIT/Apache) и закоммитить. |
| **38** | Энергетика | Оптимизация работы электросетей (Smart Grid). | Балансировка нагрузки (алгоритм на Python). | Создать ветку из определенного коммита (не последнего). |
| **39** | Логистика | Last Mile Delivery (Последняя миля). | Алгоритм курьерской доставки (Traveling Salesman). | Сравнить два произвольных коммита между собой (`git diff commit1 commit2`). |
| **40** | Логистика | Управление парком такси. | Анализ пиковых часов спроса. | Полностью удалить файл из истории Git (если в него "случайно" попал пароль) — симуляция. |

## Формат предоставления результатов

В качестве отчета принимается **только** ссылка на публичный репозиторий (GitHub или GitVerse).
Репозиторий должен содержать:
-  Файл `README.md` с описанием проекта, вашей ФИО, группы и номера варианта.
-  Историю коммитов, отражающую выполнение задания (должно быть видно ветвление, слияние, разрешение конфликтов).
-  Файлы скриптов и документации, соответствующие вашему варианту (содержательная часть файлов может быть минимальной/заглушками, но структура должна быть соблюдена).
-  Скриншоты выполнения ключевых команд (вставленные в `README.md` или папку `docs/`), подтверждающие разрешение конфликтов и работу в консоли, если это требовалось заданием.

**Критерии оценки**

| Критерий | Баллы | Требования к выполнению |
|:---|:---:|:---|
| **1. Инициализация и оформление репозитория** | **1** | Репозиторий создан на GitHub/GitVerse. Наличие файла `README.md` с указанием ФИО, группы, номера варианта и описанием бизнес-задачи. |
| **2. Структура проекта и `.gitignore`** | **2** | Соблюдена структура Data Science проекта (`/data`, `/src`, `/notebooks`). Файл `.gitignore` настроен корректно: в репозитории **отсутствуют** файлы данных (`.csv`, `.xlsx`), системные файлы и виртуальное окружение. |
| **3. Работа с ветками (Branching Strategy)** | **2** | В истории коммитов прослеживается иерархия веток: `main` → `dev` → `feature/...`. Присутствуют операции слияния (Merge/Pull Request). Работа велась не только в `main`. |
| **4. Разрешение конфликтов** | **2** | В истории коммитов явно виден момент параллельного изменения одного файла и последующее разрешение конфликта (Merge Commit или результат слияния). |
| **5. Выполнение варианта (Project & Tech Scope)** | **2** | Реализована проектная задача (созданы соответствующие скрипты/файлы) и выполнено специфическое техническое задание варианта (например, использование тегов, `rebase`, `cherry-pick` и т.д.). |
| **6. Качество истории изменений** | **1** | Коммиты имеют осмысленные названия (Semantic Commits), отражающие суть изменений (например, `"feat: add data loader"`, а не `"update 1"`). |

**Шкала перевода:**
*   **0-4 балла.** Работа не зачтена (не выполнены базовые требования по Git).
*   **5-10 баллов.** Работа зачтена (при условии защиты).